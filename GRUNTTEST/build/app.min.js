/*! node 2016-07-31 */
!function(){function a(a){var b=a.append("svg:defs").append("svg:linearGradient").attr("id","greenGrad").attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","100%").attr("spreadMethod","pad");b.append("svg:stop").attr("offset","0%").attr("stop-color","#BFFFCF").attr("stop-opacity",1),b.append("svg:stop").attr("offset","100%").attr("stop-color","#00FF40").attr("stop-opacity",1);var c=a.append("svg:defs").append("svg:linearGradient").attr("id","yellowGrad").attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","100%").attr("spreadMethod","pad");c.append("svg:stop").attr("offset","0%").attr("stop-color","#FFFF9F").attr("stop-opacity",1),c.append("svg:stop").attr("offset","100%").attr("stop-color","#FFFF00").attr("stop-opacity",1);var d=a.append("svg:defs").append("svg:linearGradient").attr("id","redGrad").attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","100%").attr("spreadMethod","pad");d.append("svg:stop").attr("offset","0%").attr("stop-color","#FF9797").attr("stop-opacity",1),d.append("svg:stop").attr("offset","100%").attr("stop-color","#FF0000").attr("stop-opacity",1)}var b=angular.module("circleApp",[]);b.directive("circleCanvas",function(){var a={restrict:"E",link:function(a,b,c){a.loadCircles()}};return a}),b.controller("circleCtrl",["$scope","$http",function(b,c){function d(){const b=2*i.cRadius+i.cPadding,c=b*i.maxRowLength+i.cPadding,d=Math.ceil(i.tCircles/i.maxRowLength)*b+i.cPadding;i.svgContainer&&(i.svgContainer.selectAll("circle").remove(),i.svgContainer.remove()),i.svgContainer=d3.select("body").append("svg").attr("width",c).attr("height",d),a(i.svgContainer)}function e(){i.circleData.length=0;for(var a=0,b=0,c=0;c<i.tCircles;c++){c%i.maxRowLength==0&&(a++,b=0),b++;var d=2*i.cRadius*b+i.cPadding*b-i.cRadius,e=2*i.cRadius*a+i.cPadding*a-i.cRadius,f={x:d,y:e,radius:i.cRadius,color:i.circleStatus[c].color};i.circleData.push(f)}}function f(){var a=i.circleData.slice(0,i.tCircles);circles=i.svgContainer.selectAll("circle").data(a).enter().append("circle"),circleAttributes=circles.attr("cx",function(a){return a.x}).attr("cy",function(a){return a.y}).attr("r",function(a){return a.radius}).style("fill",function(a){return a.color})}function g(){i.circleStatus.length=0;for(var a=0;a<i.tCircles;a++)i.circleStatus.push({color:h()})}function h(){var a=Math.floor(100*Math.random()+1);return a<=70?color="url(#greenGrad)":a>70&&a<=90?color="url(#yellowGrad)":color="url(#redGrad)",color}var i=b;i.maxRowLength=32,i.cRadius=20,i.cPadding=5,i.tCircles=5,i.circleData=[],i.circleStatus=[],i.svgContainer,i.inputError=!1,i.loadCircles=function(){console.time("loading circles"),g(),d(),e(),f(),console.timeEnd("loading circles")},i.regenCircles=function(){d(),f()},i.checkNumber=function(){isFinite(i.maxRowLength)&&isFinite(i.cRadius)&&isFinite(i.cPadding)&&isFinite(i.tCircles)?i.inputError=!1:i.inputError=!0}}])}();